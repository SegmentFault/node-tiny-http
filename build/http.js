// Generated by CoffeeScript 1.10.0
(function() {
  var Http, Result, Router, Url,
    slice = [].slice;

  Http = require('http');

  Url = require('url');

  Result = require('./result');

  Router = require('./router');

  module.exports = {
    start: function(options) {
      var http;
      http = Http.createServer(Router.handler(Result.result, options));
      if (options.sock != null) {
        return http.listen(options.sock);
      } else {
        options.port = options.port || 8888;
        options.host = options.host || 'localhost';
        return http.listen(options.port, options.host);
      }
    },
    result: Result.register,
    on: function() {
      var fn, pattern;
      pattern = arguments[0], fn = 2 <= arguments.length ? slice.call(arguments, 1) : [];
      return Router.register(null, pattern, fn);
    },
    get: function() {
      var fn, pattern;
      pattern = arguments[0], fn = 2 <= arguments.length ? slice.call(arguments, 1) : [];
      return Router.register('GET', pattern, fn);
    },
    post: function() {
      var fn, pattern;
      pattern = arguments[0], fn = 2 <= arguments.length ? slice.call(arguments, 1) : [];
      return Router.register('POST', pattern, fn);
    },
    assets: function(path, dir) {
      return Router.register('GET', (path.replace(/\/+$/g, '')) + '/%path', function(request) {
        return this.file(dir + '/' + ((request.get('path')).replace(/\.{2,}/g, '')));
      });
    }
  };

}).call(this);
