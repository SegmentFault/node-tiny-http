// Generated by CoffeeScript 1.10.0
(function() {
  var Http, Result, Router, Url;

  Http = require('http');

  Url = require('url');

  Result = require('./result');

  Router = require('./router');

  module.exports = {
    start: function(options) {
      var http;
      http = Http.createServer(Router.handler(Result.result, options));
      if (options.sock != null) {
        return http.listen(options.sock);
      } else {
        options.port = options.port || 8888;
        options.host = options.host || 'localhost';
        return http.listen(options.port, options.host);
      }
    },
    result: Result.register,
    use: Router.use,
    on: function(pattern, fn, method) {
      if (method == null) {
        method = null;
      }
      return Router.register(method, pattern, fn);
    },
    get: function(pattern, fn) {
      return Router.register('GET', pattern, fn);
    },
    post: function(pattern, fn) {
      return Router.register('POST', pattern, fn);
    },
    assets: function(path, dir) {
      return Router.register('GET', (path.replace(/\/+$/g, '')) + '/%path', function(done) {
        return done('file', dir + '/' + ((this.request.get('path')).replace(/\.{2,}/g, '')));
      });
    }
  };

}).call(this);
